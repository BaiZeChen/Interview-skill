**MySql相关知识点&八股文**
=================
**1.** 执行一条 select 语句，期间发生了什么？  

总的来说过程分为2层：Server 层和存储引擎层，
* Server 层负责建立连接、分析和执行 SQL
* 存储引擎层负责数据的存储和提取
* 具体如下：
  * 连接管理；一般基于tcp建立连接，每当有一个客户端进程连接到服务器，服务器进程都会创建一个线程专门处理；当连接断开，该线程也不会被立即被销毁，方便下一个连接用。
  * 查询缓存
  * 解析器；构建语法树和检查语法，但是不会去查表或者字段存不存在。
  * 查询优化；生成好执行计划，找存储引擎取数据
  * 存储引擎取数据；一般以记录为单位。server层根据执行计划先向存储引擎取一条户数，判断是否符合where条件，如果符合返回客户端，否则继续向存储引擎索要下一条（当然不会立即返回，先发送到缓冲区，待满是一起返回）
***
**2.** MySql怎么解决长连接占用内存的问题？

有两种解决方式。
* 第一种，定期断开长连接。既然断开连接后就会释放连接占用的内存资源，那么我们可以定期断开长连接。
* 第二种，客户端主动重置连接。MySQL 5.7 版本实现了 mysql_reset_connection() 函数的接口，注意这是接口函数不是命令，那么当客户端执行了一个很大的操作后，在代码里调用 mysql_reset_connection 函数来重置连接，达到释放内存的效果。
***
**3.** InnoDB页是什么

由于innodb数据存磁盘上的，所以想要读取或者写入数据，内存和磁盘就得进行交互，而页就是交互的单位
***
**4.** MySQL 怎么知道 varchar(n) 实际占用数据的大小？  
在COMPACT行格式中，有一个变长字段长度列表，各个字段的真实占用字节按照列的顺序逆序存放；至于用一个字节还是2个字节，根据长度和字符集长度按照一定公式计算。  
如果所有列都不是变长数据类型或者值都是null，就不需要有变长字段列表了。
***
**5.** MySQL 的 NULL 值是怎么存放的？  
在COMPACT行格式中，有一个null值列表，将每一个允许存储null的列对应一个二进制位，二进制位按照列的顺序逆序排列；1表示该值为null，0表示该值不为null。  
如果表中没有存储null的列，则null值列表也就不存在了。